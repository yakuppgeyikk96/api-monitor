@if (loading()) {
  <div class="overflow-hidden rounded-lg border border-gray-200">
    <div class="animate-pulse">
      <div class="h-10 bg-gray-100"></div>
      @for (_ of skeletonRows; track $index) {
        <div class="flex gap-4 border-t border-gray-200 px-6 py-4">
          @for (_ of columns(); track $index) {
            <div class="h-4 flex-1 rounded bg-gray-200"></div>
          }
        </div>
      }
    </div>
  </div>
} @else if (data().length === 0) {
  @if (emptyDef()) {
    <div class="rounded-lg border border-dashed border-gray-300 py-12 text-center">
      <ng-container *ngTemplateOutlet="emptyDef()!.templateRef" />
    </div>
  } @else {
    <div class="rounded-lg border border-dashed border-gray-300 py-12 text-center">
      <p class="text-sm text-gray-500">{{ emptyText() }}</p>
    </div>
  }
} @else {
  <div class="overflow-hidden rounded-lg border border-gray-200">
    <table class="min-w-full divide-y divide-gray-200">
      <thead class="bg-gray-50">
        <tr>
          @for (col of columns(); track col.key) {
            <th class="px-6 py-3 text-left text-xs font-medium tracking-wider text-gray-500 uppercase">
              {{ col.header }}
            </th>
          }
        </tr>
      </thead>
      <tbody class="divide-y divide-gray-200 bg-white">
        @for (row of data(); track $any(row)[trackBy()]) {
          <tr class="hover:bg-gray-50">
            @for (col of columns(); track col.key) {
              <td class="px-6 py-4 text-sm text-gray-900">
                @if (cellTemplateMap()[col.key]; as tmpl) {
                  <ng-container *ngTemplateOutlet="tmpl; context: { $implicit: row }" />
                } @else {
                  {{ $any(row)[col.key] }}
                }
              </td>
            }
          </tr>
        }
      </tbody>
    </table>
  </div>
}
